services:
  backend:
    environment:
      - DEBUG=1
      - PRODUCTION_MODE=false
    volumes:
      - ./backend:/app  # Mount backend code
    command: >
      sh -c "python manage.py migrate &&
             python manage.py runserver 0.0.0.0:8000"

  frontend:
    environment:
      - NODE_ENV=development
    volumes:
      - ./frontend:/app  # Mount frontend code
      - /app/node_modules  # Persistent node_modules
      - /app/.next  # Cache Next.js build
    command: npm run dev  # Run in development mode with hot reloading
